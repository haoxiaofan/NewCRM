@{
    Layout = "~/Views/Shared/_LayoutApps.cshtml";
}

@model List<NewCRM.Dto.Dto.RoleDto>
<div >
    <table class="list-table" style="text-align: center">
        <thead>
            <tr class="toolbar">
                <td style="width: 50%">权限名称</td>
                <td style="width: 50%">权限标识</td>
            </tr>
        </thead>
    </table>
</div>
<input type="hidden" id="value_1">

@section ChildrenScript
{
    <script>
        $(function () {
            if ($.dialog.data('appsid') !== '') {
                $('#value_1').val($.dialog.data('appsid'));
                var appsid = $.dialog.data('appsid').split(',');
                $('.app').each(function () {
                    for (var i = 0; i < appsid.length; i++) {
                        if (appsid[i] === $(this).attr('appid')) {
                            $(this).addClass('act');
                            break;
                        }
                    }
                });
            }
            $('.app').click(function () {
                if ($(this).hasClass('act')) {
                    var appsid = $('#value_1').val().split(',');
                    var newappsid = [];
                    for (var i = 0, j = 0; i < appsid.length; i++) {
                        if (appsid[i] !== $(this).attr('appid')) {
                            newappsid[j] = appsid[i];
                            j++;
                        }
                    }
                    $('#value_1').val(newappsid.join(','));
                    $(this).removeClass('act');
                } else {
                    if ($('#value_1').val() !== '') {
                        var appsid = $('#value_1').val().split(',');
                        appsid[appsid.length] = $(this).attr('appid');
                        $('#value_1').val(appsid.join(','));
                    } else {
                        $('#value_1').val($(this).attr('appid'));
                    }
                    $(this).addClass('act');
                }
                $.dialog.data('appsid', $('#value_1').val());
            });
        });
    </script>

}
